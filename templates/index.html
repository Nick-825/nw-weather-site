{% extends "base.html" %}
{% block content %}

<!-- –ú–æ–±–∏–ª—å–Ω—ã–π –±–ª–æ–∫: —Ç–æ–ª—å–∫–æ –ø–æ–∏—Å–∫ –∏ –ø–∞–Ω–µ–ª–∏ -->
<section class="space-y-4 md:hidden">
  <div class="rounded-3xl bg-slate-900/80 p-5 ring-1 ring-white/10 shadow-xl">
    <h2 class="text-xl font-semibold">–ü–æ–∏—Å–∫ –ø–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é</h2>
    <!-- –£–ë–†–ê–ù–û –æ–ø–∏—Å–∞–Ω–∏–µ "–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥‚Ä¶" -->
    <div class="relative mt-4">
      <input id="mobile-city-input" type="text"
             placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –ú—É—Ä–º–∞–Ω—Å–∫"
             class="w-full rounded-2xl bg-slate-950/70 px-4 py-3 ring-1 ring-white/10 outline-none focus:ring-cyan-500"
             autocomplete="off">
      <div id="mobile-suggestions" class="absolute z-20 mt-2 w-full overflow-hidden rounded-2xl bg-slate-900 ring-1 ring-white/10 hidden"></div>
    </div>
    <div class="mt-4 flex flex-wrap gap-2">
      <button type="button" data-mode="current" class="mobile-mode-btn active rounded-full bg-cyan-500/20 px-4 py-2 text-sm font-semibold text-cyan-200 ring-1 ring-cyan-500/40 transition hover:bg-cyan-500/30">–¢–µ–∫—É—â–∞—è</button>
      <button type="button" data-mode="today"   class="mobile-mode-btn rounded-full bg-slate-800/60 px-4 py-2 text-sm font-semibold text-slate-200 ring-1 ring-white/10 transition hover:bg-slate-700/70">–°–µ–≥–æ–¥–Ω—è</button>
      <button type="button" data-mode="weekly"  class="mobile-mode-btn rounded-full bg-slate-800/60 px-4 py-2 text-sm font-semibold text-slate-200 ring-1 ring-white/10 transition hover:bg-slate-700/70">–ù–∞ 7 –¥–Ω–µ–π</button>
    </div>

    <!-- –ø–∞–Ω–µ–ª–∏ —Ä–∞–∑–¥–µ–ª—å–Ω–æ (—á—Ç–æ–±—ã ¬´7 –¥–Ω–µ–π¬ª —Ä–µ–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª –Ω–µ–¥–µ–ª—é) -->
    <div id="mobile-output" class="mt-5 space-y-4">
      <div id="mobile-placeholder" class="rounded-2xl border border-dashed border-white/10 p-5 text-sm text-slate-400">
        –ù–∞–π–¥–∏—Ç–µ –≥–æ—Ä–æ–¥, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑.
      </div>

      <!-- –¢–ï–ö–£–©–ê–Ø -->
      <div data-panel="current" class="hidden rounded-2xl bg-slate-950/60 p-5 ring-1 ring-white/10 space-y-4">‚Ä¶(–∫–∞–∫ –≤ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)‚Ä¶</div>

      <!-- –°–ï–ì–û–î–ù–Ø -->
      <div data-panel="today" class="hidden rounded-2xl bg-slate-950/60 p-5 ring-1 ring-white/10 space-y-4">‚Ä¶</div>

      <!-- –ù–ï–î–ï–õ–Ø -->
      <div data-panel="weekly" class="hidden rounded-2xl bg-slate-950/60 p-5 ring-1 ring-white/10">
        <div class="flex items-center justify-between gap-3">
          <h3 class="text-base font-semibold">–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π</h3>
          <div class="text-xs text-slate-400" id="mobile-weekly-tz"></div>
        </div>
        <div id="mobile-weekly-empty" class="mt-4 text-sm text-slate-400 hidden">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞.</div>
        <div id="mobile-weekly-cards" class="mt-4 flex gap-3 overflow-x-auto pb-2"></div>
      </div>
    </div>
  </div>
</section>

<!-- –ë–ª–æ–∫ –°–ó–§–û —Å–∫—Ä—ã—Ç –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö -->
<section class="space-y-4 hidden md:block">
  <h2 class="text-2xl font-bold">–ü–æ–≥–æ–¥–∞ (–°–ó–§–û)</h2>
  <!-- –£–ë–†–ê–ù–ê —Ñ—Ä–∞–∑–∞ –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º -->
  <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-3">
    {% for row in weather %}
    <!-- –∫–∞—Ä—Ç–æ—á–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ ‚Äî –∫–∞–∫ —É –≤–∞—Å —Å–µ–π—á–∞—Å -->
    {% endfor %}
  </div>
</section>

<!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∫—É—Ä—Å—ã (–æ—Å—Ç–∞—é—Ç—Å—è –∏ –Ω–∞ –º–æ–±–∏–ª–∫–µ) -->
<section class="space-y-3">
  <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
    <h2 class="flex items-center gap-2 text-2xl font-bold">
      <span class="text-3xl">üí±</span> –ö—É—Ä—Å—ã –¶–ë –†–§
    </h2>
    {% if rates_updated %}<p class="text-xs text-slate-400">–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ rates_updated }}</p>{% endif %}
  </div>
  <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-3">
    {% for code, r in rates.items() %}
    <!-- –∫–∞—Ä—Ç–æ—á–∫–∏ –∫—É—Ä—Å–æ–≤ ‚Äî –∫–∞–∫ —É –≤–∞—Å —Å–µ–π—á–∞—Å -->
    {% endfor %}
  </div>
</section>

<!-- –ù–æ–≤–æ—Å—Ç–∏ (–Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Ç–µ–ø–µ—Ä—å 10) -->
<section class="space-y-4">
  <h2 class="text-2xl font-bold">–ù–æ–≤–æ—Å—Ç–∏</h2>
  <div class="space-y-3">
    {% for n in headlines %}
    <a href="{{ n.link }}" target="_blank" rel="noopener"
       class="block rounded-2xl bg-slate-900/70 p-4 transition hover:bg-slate-900 ring-1 ring-white/5">
      <div class="text-xs text-slate-400">{{ n.source }} ‚Ä¢ {{ n.published }}</div>
      <div class="font-medium">{{ n.title }}</div>
    </a>
    {% endfor %}
  </div>
</section>

<script>
/* –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–æ–±–∏–ª—å–Ω—ã–π JS –æ—Å—Ç–∞—ë—Ç—Å—è ‚Äî –æ–Ω —É–∂–µ —Ä–∏—Å—É–µ—Ç weekly –æ—Ç–¥–µ–ª—å–Ω–æ.
   –í–∞–∂–Ω–æ: –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≥–æ—Ä–æ–¥–∞ –º—ã –∑–∞–ø–æ–ª–Ω—è–µ–º –∏ weather, –∏ weekly, –∏ –∑–∞—Ç–µ–º
   setActiveMode('current'|'today'|'weekly') –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω—É–∂–Ω—É—é –ø–∞–Ω–µ–ª—å. */
</script>

{% endblock %}
