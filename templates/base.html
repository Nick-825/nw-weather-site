<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0f172a">
  <title>{{ title or "Погода, Новости и Курсы валют" }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      color-scheme: dark;
      --safe-inset: env(safe-area-inset-bottom, 0px);
    }
    html { scroll-behavior: smooth; }
    @keyframes sunRays { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
    @keyframes cloudDrift { 0%,100%{transform:translateX(-6%)} 50%{transform:translateX(6%)} }
    @keyframes rainDrop { 0%{transform:translateY(-20%);opacity:0} 30%{opacity:.9} 100%{transform:translateY(80%);opacity:0} }
    @keyframes snowFall { 0%{transform:translateY(-10%);opacity:0} 40%{opacity:.95} 100%{transform:translateY(90%);opacity:0} }
    @keyframes fogSlide { 0%{transform:translateX(-10%)} 50%{transform:translateX(10%)} 100%{transform:translateX(-10%)} }
    @keyframes stormFlash { 0%,100%{opacity:.4} 45%{opacity:.1} 50%{opacity:1} 55%{opacity:.2} }
    @keyframes calmPulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.05)} }
    .wiggle { animation: calmPulse 2.5s ease-in-out infinite; transform-origin:center; display:inline-block; }
    .mini-badge { font-size: 11px; line-height: 1.1; word-break: break-word; }
    .weather-icon { position: relative; display: inline-flex; align-items: center; justify-content: center; line-height: 1; }
    .weather-icon::after, .weather-icon::before { pointer-events: none; }
    .weather-icon.sunny::after { content:""; position:absolute; inset:-30%; border-radius:9999px; border:2px solid rgba(250,204,21,.45); box-shadow:0 0 18px rgba(250,204,21,.35); animation:sunRays 12s linear infinite; }
    .weather-icon.partly::after { content:""; position:absolute; bottom:-6%; width:170%; height:60%; border-radius:9999px; background:radial-gradient(circle at 30% 50%, rgba(255,255,255,.8) 0%, rgba(148,163,184,.25) 70%, transparent 100%); animation:cloudDrift 7s ease-in-out infinite; }
    .weather-icon.cloudy::after { content:""; position:absolute; bottom:-10%; width:190%; height:70%; border-radius:9999px; background:radial-gradient(circle at 30% 50%, rgba(203,213,225,.75) 0%, rgba(148,163,184,.3) 60%, transparent 100%); animation:cloudDrift 9s ease-in-out infinite; }
    .weather-icon.rainy::after,
    .weather-icon.icy-rain::after { content:""; position:absolute; bottom:-25%; width:6px; height:18px; border-radius:9999px; background:linear-gradient(to bottom, rgba(56,189,248,.8) 0%, rgba(14,165,233,0) 100%); animation:rainDrop .85s linear infinite; box-shadow:-10px 2px 0 rgba(56,189,248,.6), 10px 6px 0 rgba(14,165,233,.55); }
    .weather-icon[class*="icy-rain"]::after { background:linear-gradient(to bottom, rgba(125,211,252,.85) 0%, rgba(14,165,233,0) 100%); box-shadow:-10px 2px 0 rgba(191,219,254,.6), 10px 6px 0 rgba(147,197,253,.55); }
    .weather-icon.snowy::after { content:""; position:absolute; bottom:-30%; width:6px; height:6px; border-radius:9999px; background:rgba(226,232,240,.95); box-shadow:-12px -4px 0 rgba(241,245,249,.9), 8px 2px 0 rgba(226,232,240,.8), -4px 6px 0 rgba(203,213,225,.85), 12px -8px 0 rgba(226,232,240,.7); animation:snowFall 1.6s linear infinite; }
    .weather-icon.foggy::after { content:""; position:absolute; bottom:-10%; width:190%; height:55%; border-radius:9999px; background:linear-gradient(to right, rgba(148,163,184,.25) 0%, rgba(148,163,184,.45) 50%, rgba(148,163,184,.25) 100%); animation:fogSlide 6s ease-in-out infinite; filter:blur(2px); }
    .weather-icon.stormy::after { content:""; position:absolute; bottom:-25%; width:14px; height:28px; background:linear-gradient(135deg, rgba(250,204,21,.95) 0%, rgba(251,191,36,.6) 60%, rgba(249,115,22,.2) 100%); clip-path:polygon(50% 0, 70% 45%, 45% 45%, 65% 100%, 30% 55%, 55% 55%); animation:stormFlash 1.8s ease-in-out infinite; box-shadow:0 0 12px rgba(253,224,71,.45); }
    .weather-icon.calm { animation:calmPulse 3s ease-in-out infinite; }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">
  <header class="sticky top-0 z-40 bg-slate-950/95 backdrop-blur supports-[backdrop-filter]:bg-slate-950/80 border-b border-white/5">
    <div class="mx-auto flex w-full max-w-6xl items-center justify-between gap-4 px-4 py-3 sm:px-6">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 bg-yellow-400/90 rounded-full grid place-items-center text-slate-900 font-bold wiggle">☀️</div>
        <h1 class="font-bold text-lg sm:text-xl leading-tight">Погода • Новости • Курсы валют</h1>
      </div>
      <button id="mobile-menu-button" class="inline-flex items-center justify-center rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm font-medium text-white transition hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/40 md:hidden" aria-expanded="false" aria-controls="mobile-menu">
        <span class="sr-only">Открыть меню</span>
        <svg id="icon-menu" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="icon-close" xmlns="http://www.w3.org/2000/svg" class="hidden h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <nav class="hidden md:flex gap-6 text-sm text-slate-200/80">
        <a href="/" class="transition hover:text-white">Главная</a>
        <a href="/rates" class="transition hover:text-white">Курсы валют</a>
        <a href="/news" class="transition hover:text-white">Новости</a>
        <a href="/weather" class="transition hover:text-white">Поиск по местоположению</a>
        <a href="/weather/7days" class="transition hover:text-white">Погода на 7&nbsp;дней</a>
      </nav>
    </div>
    <nav id="mobile-menu" class="hidden flex-col gap-2 border-t border-white/10 px-4 pb-4 text-sm text-slate-100 md:hidden">
      <a href="/" class="rounded-xl bg-white/5 px-4 py-2 transition hover:bg-white/10">Главная</a>
      <a href="/rates" class="rounded-xl bg-white/5 px-4 py-2 transition hover:bg-white/10">Курсы валют</a>
      <a href="/news" class="rounded-xl bg-white/5 px-4 py-2 transition hover:bg-white/10">Новости</a>
      <a href="/weather" class="rounded-xl bg-white/5 px-4 py-2 transition hover:bg-white/10">Поиск по местоположению</a>
      <a href="/weather/7days" class="rounded-xl bg-white/5 px-4 py-2 transition hover:bg-white/10">Погода на 7&nbsp;дней</a>
    </nav>
  </header>

  <main class="mx-auto flex w-full max-w-6xl flex-col gap-10 px-4 py-6 sm:px-6 sm:py-10">
    {% block content %}{% endblock %}
  </main>

  <footer class="px-4 pb-[calc(1.5rem+var(--safe-inset))] pt-6 text-center text-sm text-slate-500">
    © 2025 Погода от
    <a href="https://t.me/weatherinversesSPb"
       target="_blank"
       rel="noopener"
       class="text-cyan-400 hover:text-cyan-300 font-semibold underline underline-offset-4">
       Васька&nbsp;Невский
    </a>
  </footer>
  <script>
    (function () {
      const button = document.getElementById('mobile-menu-button');
      const menu = document.getElementById('mobile-menu');
      const iconMenu = document.getElementById('icon-menu');
      const iconClose = document.getElementById('icon-close');

      if (!button || !menu) {
        return;
      }

      button.addEventListener('click', function () {
        const isHidden = menu.classList.toggle('hidden');
        button.setAttribute('aria-expanded', String(!isHidden));
        if (iconMenu && iconClose) {
          iconMenu.classList.toggle('hidden');
          iconClose.classList.toggle('hidden');
        }
      });

      menu.querySelectorAll('a').forEach(function (link) {
        link.addEventListener('click', function () {
          if (menu.classList.contains('hidden')) {
            return;
          }
          menu.classList.add('hidden');
          button.setAttribute('aria-expanded', 'false');
          if (iconMenu && iconClose && iconMenu.classList.contains('hidden')) {
            iconMenu.classList.remove('hidden');
            iconClose.classList.add('hidden');
          }
        });
      });
    })();
  </script>
</body>
</html>

